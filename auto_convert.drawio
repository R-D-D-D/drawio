<mxfile host="app.diagrams.net" modified="2023-12-21T15:34:36.977Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" etag="OQvqzu4poILoUAB8Gl47" version="22.1.11" type="github">
  <diagram name="Page-1" id="Dl1d8-50op7BgxrB6w2U">
    <mxGraphModel dx="1434" dy="1872" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="w-GJ_0CagrFxNj8pirr--20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eMu-bbKCbMAUfFqpTf1Y-1" target="w-GJ_0CagrFxNj8pirr--19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-1" value="background job running every 5 minutes" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" target="eMu-bbKCbMAUfFqpTf1Y-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="680" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-4" value="extract entities &lt;br&gt;(Open AI)" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="440" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="eMu-bbKCbMAUfFqpTf1Y-6" target="eMu-bbKCbMAUfFqpTf1Y-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-6" value="infer location base on extracted location and phone" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="640" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="eMu-bbKCbMAUfFqpTf1Y-8" target="eMu-bbKCbMAUfFqpTf1Y-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-12" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="eMu-bbKCbMAUfFqpTf1Y-11" vertex="1" connectable="0">
          <mxGeometry x="0.2444" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-17" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="eMu-bbKCbMAUfFqpTf1Y-8" target="eMu-bbKCbMAUfFqpTf1Y-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-8" value="location &lt;br&gt;found?" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="840" y="640" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-10" value="Create an order with FAILED-BOT status" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="820" y="490" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-13" value="After all sorts of attempts" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="895" y="630" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="eMu-bbKCbMAUfFqpTf1Y-16" target="eMu-bbKCbMAUfFqpTf1Y-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-23" value="matched product" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="eMu-bbKCbMAUfFqpTf1Y-19" vertex="1" connectable="0">
          <mxGeometry x="-0.24" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="eMu-bbKCbMAUfFqpTf1Y-16" target="eMu-bbKCbMAUfFqpTf1Y-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-22" value="unmached product" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="eMu-bbKCbMAUfFqpTf1Y-21" vertex="1" connectable="0">
          <mxGeometry x="0.005" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-16" value="infer products" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="820" y="810" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="eMu-bbKCbMAUfFqpTf1Y-18" target="eMu-bbKCbMAUfFqpTf1Y-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-18" value="store in product_in_order_table, but with custom_label column for display" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="820" y="950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-20" value="Store unmatched extracted entities in a new column in order, unmached_entities" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="530" y="801.25" width="155" height="77.5" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="eMu-bbKCbMAUfFqpTf1Y-24" target="eMu-bbKCbMAUfFqpTf1Y-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-24" value="Update order status to PENDING-BOT" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="820" y="1090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eMu-bbKCbMAUfFqpTf1Y-26" value="update message status to be SUCCESS" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="820" y="1230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vXFaygZqnlIL2xJo0e2d-1" value="&lt;h1&gt;Auto Convert Process&lt;/h1&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="w-GJ_0CagrFxNj8pirr--1" target="w-GJ_0CagrFxNj8pirr--4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--1" value="User sends or receive messages" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="w-GJ_0CagrFxNj8pirr--4" target="w-GJ_0CagrFxNj8pirr--6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--8" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="w-GJ_0CagrFxNj8pirr--7">
          <mxGeometry x="-0.1091" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="w-GJ_0CagrFxNj8pirr--4" target="w-GJ_0CagrFxNj8pirr--9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--13" value="YES" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="w-GJ_0CagrFxNj8pirr--10">
          <mxGeometry x="-0.01" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--4" value="Auto convert &lt;br&gt;enabled for this contact?" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="260" y="50" width="120" height="120" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--6" value="Save message to DB with AUTO_CONVERT_DISABLED&lt;br&gt;status" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="260" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="w-GJ_0CagrFxNj8pirr--9" target="w-GJ_0CagrFxNj8pirr--25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--9" value="Run cohere classification on message" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="480" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="w-GJ_0CagrFxNj8pirr--14" target="w-GJ_0CagrFxNj8pirr--15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--14" value="User toggle auto convert to true" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--15" value="Set in DB auto convert enabled for this contact" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="260" y="360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--17" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;fillColor=#FF6666;strokeColor=#b85450;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="403.33" y="206.67" as="sourcePoint" />
            <mxPoint x="349.9966666666667" y="140.00333333333325" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--18" value="Is this OK? we enable auto convert on the contact level, that will make things a lot easier for us to track. Means if this contact is enabled for one location, other location under him will be processed too." style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="420" y="200" width="230" height="80" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="w-GJ_0CagrFxNj8pirr--19" target="eMu-bbKCbMAUfFqpTf1Y-4">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="440" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--19" value="collect messages with the status NOT_PROCESSED" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="240" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--23" value="Save message to DB with NOT_PROCESSED" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="890" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="w-GJ_0CagrFxNj8pirr--25" target="w-GJ_0CagrFxNj8pirr--23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--28" value="YES" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="w-GJ_0CagrFxNj8pirr--27">
          <mxGeometry x="0.0273" y="3" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="w-GJ_0CagrFxNj8pirr--25" target="w-GJ_0CagrFxNj8pirr--29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--31" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="w-GJ_0CagrFxNj8pirr--30">
          <mxGeometry x="-0.1222" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--25" value="Is Order?" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="700" y="70" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--29" value="Save message to DB with NOT_ORDER status" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="680" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--32" value="For this FAILED-BOT status, it will be a new status for orders. Order with this status will be displayed on order page with nothing but contact person and company name and the message text. But this should be extremely rare, less than 1 percent?" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="970" y="490" width="255" height="100" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--33" value="These products will be like the current unmatched product in trainAI modal" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="240" y="800" width="255" height="100" as="geometry" />
        </mxCell>
        <mxCell id="w-GJ_0CagrFxNj8pirr--34" value="For this PENDING-BOT status, it will be a new status for orders. The color of the label would be same as pending.&amp;nbsp;" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="960" y="1090" width="255" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
